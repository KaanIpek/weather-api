<!DOCTYPE html>
<html>
<head>
    <title>Weather App</title>
    <script>
        async function fetchWeather() {
            const city = document.getElementById('city').value;
            const startDate = document.getElementById('start-date').value;
            const endDate = document.getElementById('end-date').value;
            const unit = document.querySelector('input[name="unit"]:checked').value;

            const response = await fetch(`/weather?city_id=${city}&start_date=${startDate}&end_date=${endDate}&unit=${unit}`);
            const data = await response.json();

            const resultDiv = document.getElementById('results');
            resultDiv.innerHTML = '';
            data.forEach(weather => {
                const temperature = unit === 'imperial' ? weather.temperature_f : weather.temperature_c;
                const temperatureUnit = unit === 'imperial' ? '°F' : '°C';
                resultDiv.innerHTML += `<p>Date: ${weather.date}<br>Temperature: ${temperature} ${temperatureUnit}</p>`;
            });
        }
    </script>
</head>
<body>
    <div>
        <label for="city">Select City:</label>
        <select id="city">
            <option value="1">New York</option>
            <option value="2">Istanbul</option>
            <option value="3">Paris</option>
            <option value="4">New Delhi</option>
        </select>
    </div>
    <div>
        <label for="start-date">Start Date:</label>
        <input type="date" id="start-date">
    </div>
    <div>
        <label for="end-date">End Date:</label>
        <input type="date" id="end-date">
    </div>
    <div>
        <label>Temperature Unit:</label>
        <input type="radio" id="celsius" name="unit" value="metric" checked>
        <label for="celsius">Celsius</label>
        <input type="radio" id="fahrenheit" name="unit" value="imperial">
        <label for="fahrenheit">Fahrenheit</label>
    </div>
    <button onclick="fetchWeather()">Fetch Weather</button>
    <div id="results"></div>
</body>
</html>
